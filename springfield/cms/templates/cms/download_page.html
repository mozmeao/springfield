{#
  This Source Code Form is subject to the terms of the Mozilla Public
  License, v. 2.0. If a copy of the MPL was not distributed with this
  file, You can obtain one at https://mozilla.org/MPL/2.0/.
#}

{% extends "cms/base-flare26.html" %}

{% block body_class %}fl-home-body{% endblock %}


{% block content %}
<div class="fl-page">
  <main class="fl-main">
    <section class="fl-home-upper fl-download-intro">
      {# TODO: implement platform select with the available platforms #}
      <h1>{{ ftl('firefox-download-for', platform=page.platform) }}</h1>
      <p class="fl-subheading">{{ page.subheading|richtext|remove_p_tag }}</p>
      {# TODO: Get the right download link for the platform #}
      <a class="fl-button">Download</a>
      {% if page.intro_footer_text %}
        <p class="fl-download-intro-footer-text">{{ page.intro_footer_text|richtext|remove_p_tag }}</p>
      {% endif %}
      <div class="fl-download-intro-featured-image">
        {{ srcset_image(
            page.featured_image,
            "width-{200,400,600,800,1000,1200,1400}",
            sizes="(min-width: 900px) 810px, 100vw",
            width=page.featured_image.width,
            height=page.featured_image.height,
            loading="lazy",
        ) }}
      </div>
    </section>

    <section class="fl-home-lower">
      {% set ns = namespace(headings=0) %}
      {% for block in page.content %}
        {% set block_index = loop.index %}
        {% set block_type = block.block_type %}
        {% set block_position = "block-" ~ block_index + "-" + block_type %}

        {% if block.value.heading and block.value.heading.heading_text %}
          {% set block_level = 1 if ns.headings == 0 else 2 %}
          {% set ns.headings = ns.headings + 1 %}
        {% endif %}

        {% include_block block %}
      {% endfor %}
    </section>
  </main>
</div>
{% endblock %}


{% block pre_footer %}
  {% if page.pre_footer %}
    {% for block in page.pre_footer %}
      {% include_block block %}
    {% endfor %}
  {% endif %}
{% endblock pre_footer %}
