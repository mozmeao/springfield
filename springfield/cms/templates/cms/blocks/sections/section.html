
{#
 This Source Code Form is subject to the terms of the Mozilla Public
 License, v. 2.0. If a copy of the MPL was not distributed with this
 file, You can obtain one at https://mozilla.org/MPL/2.0/.
#}

{% set block_text = value.heading.heading_text|richtext|remove_tags %}

<include:conditional-display condition="{{ value.settings.show_to }}">
  <include:section>
    <content:heading>
      {% with alignment_class="text-center" %}
        {% include_block value.heading %}
      {% endwith %}
    </content:heading>
    <content:content>
      {% for block in value.content %}
        {% set block_position = block_position ~ ".item-" ~ loop.index ~ "-" ~ block.block_type %}
        {% include_block block %}
      {% endfor %}
    </content:content>
    {% if value.cta %}
      <content:cta>
        {% for cta in value.cta %}
          <a class="fl-section-cta-link"
            href="{{ cta.link.get_url()|add_utm_parameters }}"
            {% if cta.link.new_window %}target="_blank" rel="external noopener"{% endif %}
            data-cta-position="{{ block_position + ".cta" }}"
            data-cta-text="{{ block_text + " - " + cta.label }}"
            data-cta-uid="{{ cta.settings.analytics_id }}"
          >{{ cta.label }}</a>
        {% endfor %}
      </content:cta>
    {% endif %}
  </include:section>
</include:conditional-display>
