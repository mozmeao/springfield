{#
 This Source Code Form is subject to the terms of the Mozilla Public
 License, v. 2.0. If a copy of the MPL was not distributed with this
 file, You can obtain one at https://mozilla.org/MPL/2.0/.
#}

{% set block_position = block_position or "banner" %}
{% set block_text = value.heading.heading_text|richtext|remove_tags %}

<include:conditional-display condition="{{ value.settings.show_to }}">
  {% set brand_image_size = 'large' if value.settings.theme in ['filled-large', 'filled-tail'] else 'small' %}
  {% set centered = value.settings.theme in ['filled', 'filled-face', 'filled-small'] %}
  <include:kit-banner
    brand_image_size="{{ brand_image_size }}"
    centered="{{ centered }}"
  >

    <content:heading>
      {% set heading_level = 'h' ~ block_level if block_level else 'h2' %}
      <include:heading
        level="{{ heading_level }}"
        heading_size="fl-heading-size-2"
        alignment_class=""
        superheading_text="{{ value.heading.superheading_text|richtext|remove_p_tag }}"
        heading_text="{{ value.heading.heading_text|richtext|remove_p_tag }}"
        subheading_text="{{ value.heading.subheading_text|richtext|remove_p_tag }}"
        subheading_size="fl-subheading-4"
      />
    </content:heading>

    {% set images = {
      'filled-small': {'url': '/media/img/firefox/flare/fox-brand.svg', 'alt': 'Curious Firefox'},
      'filled-large': {'url': '/media/img/firefox/flare/fox-brand.svg', 'alt': 'Curious Firefox'},
      'filled-face': {'url': '/media/img/firefox/flare/forward-facing-kit.svg', 'alt': 'Sitting Firefox'},
      'filled-tail': {'url': '/media/img/firefox/flare/kit-tail.png', 'alt': 'Firefox Tail'},
    } %}
    {% set brand_image = images.get(value.settings.theme) %}

    {% if brand_image %}
      <content:brand>
        <include:image url="{{ brand_image.url }}" alt="{{ brand_image.alt }}" />
      </content:brand>
    {% endif %}

    {% if value.buttons %}
      <content:actions>
        <div class="fl-buttons is-horizontal">
          {% for button in value.buttons %}
            {% set block_position = block_position ~ ".button-" ~ loop.index %}
            {% include_block button %}
          {% endfor %}
        </div>
      </content:actions>
    {% endif %}
  </include:kit-banner>

</include:conditional-display>
