{#
  This Source Code Form is subject to the terms of the Mozilla Public
  License, v. 2.0. If a copy of the MPL was not distributed with this
  file, You can obtain one at https://mozilla.org/MPL/2.0/.
#}

{% set base_template = "cms/base-flare26.html" if switch("flare26_enabled") else "cms/base-flare.html" %}
{% extends base_template %}

{% block body_class %}fl-article-body {% if not switch("flare26_enabled") %}disable-dark-mode{% endif %}{% endblock %}

{% block content %}
<div class="fl-page fl-article-page">
  <main class="fl-main">
    <div class="fl-article-main">
      <header class="fl-article-header">
        <include:heading
            level="h1"
            heading_text="{{ page.title }}"
        />
        {% if switch("flare26_enabled") and page.image %}
          <div class="image-variants-display">
            {%- set default_classes -%}
              {%- if page.image_dark_mode %}display-light {% endif -%}
              {%- if page.image_mobile or page.image_dark_mode_mobile %}display-sm-up{% endif -%}
            {%- endset -%}
            {{ srcset_image(
                page.image,
                "width-{200,400,600,800,1000,1200,1400}",
                sizes="(min-width: 768px) 50vw, (min-width: 1440px) 680px, 100vw",
                width=page.image.width,
                loading="lazy",
                class=default_classes,
            ) }}
            {% if page.image_mobile %}
              {%- set mobile_classes -%}
                {%- if page.image_dark_mode_mobile %}display-light {% endif -%}display-xs
              {%- endset -%}
              {{ srcset_image(
                  page.image_mobile,
                  "width-{200,400,600,800,1000,1200,1400}",
                  sizes="(min-width: 768px) 50vw, (min-width: 1440px) 680px, 100vw",
                  width=page.image_mobile.width,
                  loading="lazy",
                  class=mobile_classes,
              ) }}
            {% endif %}
            {% if page.image_dark_mode_mobile %}
              {{ srcset_image(
                  page.image_dark_mode_mobile,
                  "width-{200,400,600,800,1000,1200,1400}",
                  sizes="(min-width: 768px) 50vw, (min-width: 1440px) 680px, 100vw",
                  width=page.image_dark_mode_mobile.width,
                  loading="lazy",
                  class="display-dark display-xs",
              ) }}
            {% endif %}
            {% if page.image_dark_mode %}
              {%- set dark_classes -%}
                display-dark{%- if page.image_dark_mode_mobile or page.image_mobile %} display-sm-up{% endif -%}
              {%- endset -%}
              {{ srcset_image(
                  page.image_dark_mode,
                  "width-{200,400,600,800,1000,1200,1400}",
                  sizes="(min-width: 768px) 50vw, (min-width: 1440px) 680px, 100vw",
                  width=page.image_dark_mode.width,
                  loading="lazy",
                  class=dark_classes,
              ) }}
            {% endif %}
          </div>
        {% endif %}
      </header>

      <section class="fl-rich-text">
        {% for block in page.content %}
          {% include_block block %}
        {% endfor %}
      </section>
    </div>



    {% if switch("flare26_enabled") and page.related_articles %}
      {% for block in page.related_articles %}
        {% include_block block %}
      {% endfor %}
    {% endif %}
  </main>
  {% if not switch("flare26_enabled") %}
    {% set value = get_download_firefox_cta_snippet() %}
    {% if value %}
      {% include "cms/snippets/download-firefox-cta.html" %}
    {% endif %}
  {% endif %}
</div>
{% endblock %}
