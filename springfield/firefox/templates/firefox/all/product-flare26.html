{#
 This Source Code Form is subject to the terms of the Mozilla Public
 License, v. 2.0. If a copy of the MPL was not distributed with this
 file, You can obtain one at https://mozilla.org/MPL/2.0/.
#}

{# Choose product #}

<div tabindex="-1" aria-labelledby="all-product" class="fl-c-flow-section c-step-name">
  <!-- STEP IS ALWAYS VISIBLE -->
  <div class="fl-c-flow-step">
    <span class="fl-c-flow-step-checkbox">{% if product %}<include:icon icon_name="checkmark" />{% endif %}</span>
    <h2 id="all-product" class="fl-c-flow-step-title {% if ftl_has_messages('firefox-all-browser-v3') %}fl-t-flow-step-title-counter{% endif %} fl-body fl-body-2xs fl-u-text-uppercase fl-u-font-medium">
      {% if ftl_has_messages('firefox-all-browser-v3') %}
        {{ ftl('firefox-all-browser-v3') }}
      {% else %}
        {{ ftl('firefox-all-browser-v2') }}
      {% endif %}
      {% if not product %}
        <a id="icon-browser-help" href="#browser-help" class="c-button-help" title="{{ ftl('firefox-all-learn-about-firefox') }}">
          <include:icon icon_name="help" />
          <span class="visually-hidden">{{ ftl('firefox-all-get-help') }}</span>
        </a>
      {% endif %}
    </h2>
  </div>

  <!-- CONTENT is either SELECTION or OPTIONS -->
  {% if product %}
    <h3 id="all-product-selection" class="fl-c-flow-selection fl-heading fl-heading-xs">{{ product and product.name }}
      <include:button
        theme_class="button-secondary fl-button-small fl-u-text-uppercase load-content-partial"
        label="{{ ftl('ui-edit') }}"
        icon_name="edit"
        icon_position="left"
        link="{{ url('firefox.all') }}"
        aria_labelledby="all-product all-product-selection"
      />
    </h3>
  {% else %}
    <div class="fl-c-flow-options">
      {% set desktop_heading %}
          <span class="fl-c-flow-options-heading"><img alt="" role="presentation" src="{{ static('protocol/img/icons/desktop.svg') }}" class="fl-c-flow-product-title-img"> {{ ftl('firefox-all-desktop') }}</span>
      {% endset %}
      <include:heading
        level="h3"
        heading_size="fl-heading-2xs"
        heading_text="{{ desktop_heading }}"
        class="test"
      />
      <ul class="c-product-list qa-desktop-list fl-c-unstyled-list">
        <li class="release"><a href="{{ url('firefox.all.platforms', product_slug='desktop-release') }}" class="load-content-partial">{{ ftl('firefox-all-product-firefox') }}</a> <strong>{{ ftl('firefox-all-recommended') }}</strong></li>
        {% for p in products %}
          {% if p.slug.startswith('desktop') and not p.slug.endswith('release') %}
            <li class="{{ p.slug }}"><a href="{{ url('firefox.all.platforms', product_slug=p.slug) }}" class="load-content-partial">{{ p.name }}</a></li>
          {% endif %}
        {% endfor %}
      </ul>

      {% set mobile_heading %}
          <span class="fl-c-flow-options-heading"><img alt="" role="presentation" src="{{ static('protocol/img/icons/mobile.svg') }}" class="fl-c-flow-product-title-img"> {{ ftl('firefox-all-mobile') }}</span>
      {% endset %}
      <include:heading
        level="h3"
        heading_size="fl-heading-2xs"
        heading_text="{{ mobile_heading }}"
      />
      <ul class="c-product-list qa-mobile-list fl-c-unstyled-list">
        <li class="release"><a href="{{ url('firefox.all.platforms', product_slug='mobile-release') }}" class="load-content-partial">{{ ftl('firefox-all-product-firefox') }}</a> <strong>{{ ftl('firefox-all-recommended') }}</strong></li>
        {% for p in products %}
          {% if p.slug.startswith('android') and not p.slug.endswith('release')%}
            <li class="{{ p.slug }}"><a href="{{ url('firefox.all.platforms', product_slug=p.slug) }}" class="load-content-partial">{{ p.name }}</a></li>
          {% endif %}
        {% endfor %}
        <li class="ios-testflight"><a href="{{ url('firefox.ios.testflight') }}">{{ ftl('firefox-all-product-firefox-ios-testflight') }}</a></li>
      </ul>

      <div id="browser-help" class="c-help mzp-u-modal-content">
        <h3>{{ ftl('firefox-all-learn-about-firefox') }}</h3>
        <ul class="fl-c-unstyled-list">
          <li>
            <h4 class="c-help-title"><a href="{{ url('firefox') }}">{{ ftl('firefox-all-product-firefox') }}</a></h4>
            <p class="c-help-desc">{{ ftl('firefox-all-the-standard-firefox') }}</p>
          </li>
          <li>
            <h4 class="c-help-title"><a href="{{ url('firefox.channel.desktop') }}#beta">Firefox <span>Beta</span></a></h4>
            <p class="c-help-desc">{{ ftl('firefox-all-get-a-sneak-peek-at') }}</p>
          </li>
          <li>
            <h4 class="c-help-title"><a href="{{ url('firefox.developer.index') }}">Firefox <span>Developer Edition</span></a></h4>
            <p class="c-help-desc">{{ ftl('firefox-all-test-your-sites-against') }}</p>
          </li>
          <li>
            <h4 class="c-help-title"><a href="{{ url('firefox.channel.desktop') }}#nightly">Firefox <span>Nightly</span></a></h4>
            <p class="c-help-desc">{{ ftl('firefox-all-the-pre-alpha-version') }}</p>
          </li>
          <li>
            <h4 class="c-help-title"><a href="{{ url('firefox.enterprise.index') }}">Firefox <span>Extended Support Release</span></a></h4>
            <p class="c-help-desc">{{ ftl('firefox-all-count-on-stability-and') }}</p>
          </li>
        </ul>
      </div>
    </div>
{% endif %}
  </div>
