{#
  This Source Code Form is subject to the terms of the Mozilla Public
  License, v. 2.0. If a copy of the MPL was not distributed with this
  file, You can obtain one at https://mozilla.org/MPL/2.0/.
 #}

{% set params = '?utm_source=www.firefox.com&utm_medium=referral&utm_campaign=download-button' %}

{% macro firefox_download_desktop_button_windows(
  cta_copy=ftl('download-button-download-now'),
  id='download-button-desktop-release-win',
  build='32',
  position='primary cta',
  flare_styles=False
) -%}
  {% set class_name = 'os_win' if build == '32' else 'os_win64' %}
  {% set os = 'win' if build == '32' else 'win64' %}
  <div class="firefox-platform-button-windows">
    <div class="{% if flare_styles %}fl-firefox-platform-button{% else %}firefox-platform-button{% endif %}">
      {% set btn_class = "fl-button" if flare_styles else "mzp-t-xl mzp-c-button mzp-t-product" %}
      <a class="download-link {{ class_name }} {{ btn_class }} ga-product-download"
        id="{{ id }}"
        href="{{ settings.BOUNCER_URL }}?product=firefox-stub&os={{ os }}&lang={{ LANG }}"
        data-download-version="{{ os }}"
        data-cta-text="Download Now"
        data-cta-type="firefox"
        data-cta-position="{{ position }}"
        >
        <strong class="download-title">
          {{ cta_copy }}
        </strong>
        {% if flare_styles %}
          <include:icon
            icon_name="download"
            hidden=true
            extra_class="fl-icon-right" />
        {% else %}
          <span class="mzp-c-button-icon-end">
            <!-- TODO: replace with new protocol-assets version -->
            <img src="{{ static('img/icons/m24-small/download-white.svg') }}" alt="">
          </span>
        {% endif %}
      </a>

      <small class="{% if flare_styles %}fl-privacy-link{% else %}mzp-c-button-download-privacy-link{% endif %}">
        <a href="https://www.mozilla.org/{{ LANG }}/privacy/firefox/{{ params }}">
          {{ ftl('download-button-firefox-privacy-notice') }}
        </a>
      </small>
    </div>

    {# ESR download buttons to display on unsupported systems: issue 13317 #}
    {% with channel_name = 'Firefox' %}
      {% include 'firefox/includes/download-unsupported.html' %}
    {% endwith %}
  </div>
{%- endmacro %}

{% macro firefox_download_desktop_button_mac(
  cta_copy=ftl('download-button-download-now'),
  id='download-button-desktop-release-osx',
  position='primary cta',
  flare_styles=False
) -%}
  {% set download_lang = "ja-JP-mac" if LANG == "ja" else LANG %}
  <div class="firefox-platform-button-mac">
    <div class="{% if flare_styles %}fl-firefox-platform-button{% else %}firefox-platform-button{% endif %}">
      {% set btn_class = "fl-button" if flare_styles else "mzp-t-xl mzp-c-button mzp-t-product" %}
      <a class="download-link os_osx {{ btn_class }} ga-product-download"
        id="{{ id }}" href="{{ settings.BOUNCER_URL }}?product=firefox-latest-ssl&os=osx&lang={{ download_lang }}"
        data-download-version="osx"
        data-cta-text="Download Now"
        data-cta-type="firefox"
        data-cta-position="{{ position }}"
        data-testid="{{ id }}"
        >
        <strong class="download-title">
          {{ cta_copy }}
        </strong>
        {% if flare_styles %}
          <include:icon
            icon_name="download"
            hidden=true
            extra_class="fl-icon-right" />
        {% else %}
          <span class="mzp-c-button-icon-end">
            <!-- TODO: replace with new protocol-assets version -->
            <img src="{{ static('img/icons/m24-small/download-white.svg') }}" alt="">
          </span>
        {% endif %}
      </a>

      <small class="{% if flare_styles %}fl-privacy-link{% else %}mzp-c-button-download-privacy-link{% endif %}">
        <a href="https://www.mozilla.org/{{ LANG }}/privacy/firefox/{{ params }}">
          {{ ftl('download-button-firefox-privacy-notice') }}
        </a>
      </small>
    </div>

    {# ESR download buttons to display on unsupported systems: issue 13317 #}
    {% with channel_name = 'Firefox' %}
      {% include 'firefox/includes/download-unsupported.html' %}
    {% endwith %}
  </div>
{%- endmacro %}


{% macro firefox_download_desktop_button_linux(
  cta_copy=ftl('download-button-download-now'),
  id='download-button-desktop-release-linux',
  position='primary cta',
  flare_styles=False
) -%}
  <div class="firefox-platform-button-linux">
    <div class="{% if flare_styles %}fl-firefox-platform-button{% else %}firefox-platform-button{% endif %}">
      {% set btn_class = "fl-button" if flare_styles else "mzp-t-xl mzp-c-button mzp-t-product" %}
      <a class="download-link os_linux64 {{ btn_class }} ga-product-download" id="{{ id }}-64" href="{{ settings.BOUNCER_URL }}?product=firefox-latest-ssl&os=linux64&lang={{ LANG }}" data-download-version="linux64" data-cta-text="Download for Linux 64-bit" data-cta-position="{{ position }}" data-testid="{{ id }}-64">
        <strong class="download-title">
          {{ ftl('download-button-linux-64-v2') }}
        </strong>

        {% if flare_styles %}
          <include:icon
            icon_name="download"
            hidden=true
            extra_class="fl-icon-right" />
        {% else %}
          <span class="mzp-c-button-icon-end">
            <!-- TODO: replace with new protocol-assets version -->
            <img src="{{ static('img/icons/m24-small/download-white.svg') }}" alt="">
          </span>
        {% endif %}
      </a>
      <a class="download-link os_linux64-aarch64 mzp-t-xl mzp-c-button mzp-t-product ga-product-download" id="{{ id }}-64-aarch64" href="{{ settings.BOUNCER_URL }}?product=firefox-latest-ssl&os=linux64-aarch64&lang={{ LANG }}" data-download-version="linux64-aarch64" data-cta-text="Download for Linux ARM64/AArch64" data-cta-position="{{ position }}" data-testid="{{ id }}-64-aarch64">
        <strong class="download-title">
          {{ ftl('download-button-linux-arm64') }}
        </strong>
        <span class="mzp-c-button-icon-end">
          <!-- TODO: replace with new protocol-assets version -->
          <img src="{{ static('img/icons/m24-small/download-white.svg') }}" alt="">
        </span>
      </a>

      <p class="c-linux-debian">{{ ftl('download-button-using-debian', attrs='href="https://support.mozilla.org/kb/install-firefox-linux#w_install-firefox-deb-package-for-debian-based-distributions" rel="external noopener"
      data-cta-text="You can set up our APT repository instead"')}}</p>

      <small class="{% if flare_styles %}fl-privacy-link{% else %}mzp-c-button-download-privacy-link{% endif %}">
        <a href="https://www.mozilla.org/{{ LANG }}/privacy/firefox/{{ params }}">
          {{ ftl('download-button-firefox-privacy-notice') }}
        </a>
      </small>
    </div>
  </div>
{%- endmacro %}
