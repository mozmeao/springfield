{#
 This Source Code Form is subject to the terms of the Mozilla Public
 License, v. 2.0. If a copy of the MPL was not distributed with this
 file, You can obtain one at https://mozilla.org/MPL/2.0/.
#}

{% from "macros.html" import apple_app_store_button with context %}
{% from "macros-protocol.html" import split with context %}

{% extends "base-protocol.html" %}

{% set show_firefox_app_store_banner = switch('firefox-app-store-banner') %}
{% set ios_url = app_store_url('firefox', 'firefox-browsers-mobile-ios') %}

{% block page_css %}
  {{ css_bundle('protocol-split') }}
  {{ css_bundle('firefox-browsers-mobile') }}
  {{ css_bundle('protocol-callout') }}
  {{ css_bundle('firefox-ios-summarizer') }}

  {% if show_firefox_app_store_banner %}
    {{ css_bundle('firefox-app-store-banner') }}
  {% endif %}
{% endblock %}

{# Issue 13019: Avoid duplicate content for English pages. #}
{%- block page_title_full -%}
  {%- if LANG == 'en-US' -%}
    Get Firefox for iOS (iPhone and iPad) — Mozilla (US)
  {%- elif LANG == 'en-GB' -%}
    Download Firefox for iOS (iPhone and iPad) — Mozilla (UK)
  {%- else -%}
    {{ ftl('mobile-ios-firefox-browser-ios') }} - Mozilla
  {%- endif -%}
{%- endblock -%}

{% block page_desc %}{{ ftl('mobile-ios-see-your-open-tabs') }}{% endblock %}

{% block body_class %}{{ super() }} mobile-ios{% endblock %}

{% block page_banner %}
  {% if show_firefox_app_store_banner %}
    {% include 'includes/banners/mobile/firefox-app-store.html' %}
  {% endif %}
{% endblock %}

{% block site_header %}
  {% with hide_nav_download_button=True %}
    {% include 'includes/navigation/navigation.html' %}
  {% endwith %}
{% endblock %}

{% block content %}
<main>
  <section class="mzp-c-callout mzp-t-hero mzp-t-firefox mzp-t-product-firefox ios-summarizer-hero">
    <div class="ios-summarizer-hero-background"></div>
    <div class="mzp-l-content">
      <div class="mzp-c-callout-content" style="text-align:center">
        <h1 class="mzp-c-callout-title">{{ ftl('mobile-ios-summarizer-hero-title') }}</h1>
        <p class="mzp-c-callout-desc">{{ ftl('mobile-ios-summarizer-hero-subtitle') }}</p>
        <p class="mzp-c-callout-cta">{{ apple_app_store_button(href=ios_url) }}</p>
      </div>

      <figure class="mzp-c-callout-image">
        {{ resp_img(
          'img/firefox/browsers/mobile/ios/shake-to-summarize-hero-phone-placeholder.png',
          srcset={ 'img/firefox/browsers/mobile/ios/shake-to-summarize-hero-phone-placeholder.png': '2x' },
          optional_attributes={'alt': 'iPhone mockup placeholder', 'loading': 'eager', 'decoding': 'async'}
        ) }}
      </figure>
    </div>
  </section>

  {% call split(
    image=resp_img('img/firefox/browsers/mobile/ios/shake-to-summarize-endless-webpages.png',
      srcset={ 'img/firefox/browsers/mobile/ios/shake-to-summarize-endless-webpages.png': '2x' },
      optional_attributes={ 'class': 'mzp-c-split-media-asset' }
    ),
    block_class='mzp-l-split-center-on-sm-md mzp-t-content-xl mzp-t-split-nospace',
    theme_class='mzp-t-background'
  ) %}
    <h3>{{ ftl('mobile-ios-summarizer-pitch1-title') }}</h3>
    <p>{{ ftl('mobile-ios-summarizer-pitch1-body') }}</p>
    <a href="{{ ios_url }}" rel="external noopener" class="ga-product-download" data-cta-text="Get Firefox for iOS" data-cta-type="firefox_mobile" >
      {{ ftl('mobile-ios-summarizer-cta-get-app') }}
    </a>
  {% endcall %}

  {% call split(
    image=resp_img('img/firefox/browsers/mobile/ios/shake-to-summarize-screenshot.png',
      srcset={ 'img/firefox/browsers/mobile/ios/shake-to-summarize-screenshot.png': '2x' },
      optional_attributes={ 'class': 'mzp-c-split-media-asset' }
    ),
    block_class='mzp-l-split-reversed mzp-l-split-center-on-sm-md mzp-t-content-xl'
  ) %}
    <h3>{{ ftl('mobile-ios-summarizer-pitch2-title') }}</h3>
    <p>{{ ftl('mobile-ios-summarizer-pitch2-body') }}</p>
    <a href="{{ ios_url }}" rel="external noopener" class="ga-product-download" data-cta-text="Get Firefox for iOS" data-cta-type="firefox_mobile" >
      Get the app
    </a>
  {% endcall %}

  {% call split(
    image=resp_img('img/firefox/browsers/mobile/ios/shake-to-summarize-enroll-qr-code.png',
      srcset={ 'img/firefox/browsers/mobile/ios/shake-to-summarize-enroll-qr-code.png': '2x' },
      optional_attributes={ 'class': 'mzp-c-split-media-asset' }
    ),
    block_class='mzp-l-split-center-on-sm-md mzp-t-content-xl mzp-t-split-nospace ios-summarizer-use-steps',
    theme_class='mzp-t-background'
  ) %}
    <h3>{{ ftl('mobile-ios-summarizer-pitch3-title') }}</h3>
    <p>{{ ftl('mobile-ios-summarizer-pitch3-body') }}</p>
    <ol>
      <li>{{ ftl('mobile-ios-summarizer-steps-1') }}</li>
      <li>{{ ftl('mobile-ios-summarizer-steps-2') }}</li>
      <li>{{ ftl('mobile-ios-summarizer-steps-3') }}</li>
    </ol>
    <p class="mzp-c-callout-cta">{{ apple_app_store_button(href=ios_url) }}</p>
  {% endcall %}

  {% call split(
    image=resp_img('img/firefox/browsers/mobile/about-hero-800.png',
      srcset={
        'img/firefox/browsers/mobile/about-hero-500.png': '500w',
        'img/firefox/browsers/mobile/about-hero-800.png': '800w',
        'img/firefox/browsers/mobile/about-hero-1100.png': '1100w'
      },
      sizes={
        '(min-width: 768px)': '760px',
        'default': '250px'
      },
      optional_attributes={
        'class': 'mzp-c-split-media-asset',
        'height': '664',
        'width': '760',
        'loading': 'lazy'
      }
    ),
    block_class='about-mozilla mzp-l-split-center-on-sm-md mzp-t-content-xl mzp-t-split-nospace',
    theme_class='mzp-t-dark',
    media_class='mzp-l-split-media-overflow mzp-l-split-h-center',
    media_after=True
  ) %}
    <h3>{{ ftl('mobile-ios-about-mozilla') }}</h3>
    <p>{{ ftl('mobile-ios-mozilla-exists-to-v2', 'mobile-ios-mozilla-exists-to') }}</p>
  {% endcall %}

</main>
{% endblock %}

{% block js %}
{% if variation == '2' %}
  {{ js_bundle('firefox-browsers-ios-sms') }}
{% else %}
  {{ js_bundle('firefox-browsers-mobile') }}
{% endif %}

  {% if show_firefox_app_store_banner %}
    {{ js_bundle('firefox-app-store-banner') }}
  {% endif %}
{% endblock %}
