/*
* This Source Code Form is subject to the terms of the Mozilla Public
* License, v. 2.0. If a copy of the MPL was not distributed with this
* file, You can obtain one at https://mozilla.org/MPL/2.0/.
*/

/* =====================================================================
Card Grid - Flare 2026 Design System Cards
===================================================================== */

.fl-card-grid {
    --fl-card-grid-gap: var(--token-spacing-lg);
    --fl-card-sticker-size: 60px;
    align-items: stretch;
    container-type: inline-size;
    display: flex;
    flex-direction: column;
    gap: var(--fl-card-grid-gap);
    justify-content: center;
    padding-block: var(--token-layout-3xs);
    padding-inline: var(--token-spacing-lg);
}

.fl-card-grid .fl-sticker-card,
.fl-card-grid .fl-illustration-card {
    flex: 1 1 auto;
}

.fl-card-heading .fl-heading-group {
    display: flex;
    flex-direction: column;
    gap: var(--token-spacing-xl);
    order: 0;
}

.fl-card-superheading {
    color: var(--fl-theme-card-superheading-color);
    font-size: var(--fl-theme-font-size-body-2xs);
    margin: 0;
    text-transform: uppercase;
}

.fl-card-expand-link {
    cursor: pointer;
}

.fl-card-heading-link {
    color: inherit;
    text-decoration: none;
}

.fl-card-heading-link:hover .fl-heading,
.fl-card-heading-link:focus .fl-heading,
.fl-card-heading-link:active .fl-heading {
    text-decoration: underline;
}

.fl-card-expand-link a::after,
.fl-card-expand-link button::after {
    content: '';
    inset: 0;
    position: absolute;
}

.fl-card-expand-link:hover
    :is(
        h1.fl-heading,
        h2.fl-heading,
        h3.fl-heading,
        h4.fl-heading,
        h5.fl-heading,
        h6.fl-heading
    ) {
    text-decoration: underline;
}

@media (--viewport-sm-up) {
    .fl-card-grid {
        --fl-card-sticker-size: 120px;
        flex-flow: row wrap;
    }

    .fl-card-grid .fl-sticker-card {
        flex-basis: calc((100% - var(--fl-card-grid-gap)) / 2);
        min-height: calc((100cqw - var(--fl-card-grid-gap)) / 2);
    }
}

@media (--viewport-lg-up) {
    .fl-card-grid {
        flex-wrap: nowrap;
    }

    .fl-card-grid .fl-sticker-card {
        flex-basis: 100%;
        min-height: unset;
    }
}

/* =====================================================================
Basic Card
===================================================================== */

.fl-card {
    align-items: stretch;
    backdrop-filter: blur(7.5px);
    background: var(--fl-theme-surface-card-gradient);
    border: 1px solid var(--card-border-color);
    border-radius: var(--token-border-radius-sm);
    box-shadow: var(--fl-theme-shadow-card);
    color: var(--token-color-black-4);
    padding: var(--token-spacing-2xl);
    position: relative;
    transition:
        transform var(--token-transition-base),
        box-shadow var(--token-transition-base);
}

.fl-card:hover {
    box-shadow: 0 40px 96px var(--token-color-dark-purple-22);
    transform: translateY(-2px);
}

.fl-card .fl-heading-group {
    gap: unset;
    margin: 0;
    padding: 0;
}

/* =====================================================================
Sticker Card
===================================================================== */

.fl-sticker-card {
    align-items: stretch;
    backdrop-filter: blur(7.5px);
    background: var(--fl-theme-surface-card-gradient);
    border-radius: var(--token-border-radius-md);
    box-shadow: var(--fl-theme-shadow-card);
    color: var(--token-color-black-4);
    display: flex;
    flex-direction: column;
    gap: var(--token-spacing-xl);
    height: auto;
    justify-content: flex-start;
    min-height: 100cqw;
    padding: var(--token-spacing-2xl) var(--token-spacing-2xl)
        var(--token-spacing-3xl);
    position: relative;
    text-align: center;
    transition:
        transform var(--token-transition-base),
        box-shadow var(--token-transition-base);
}

.fl-sticker-card:hover {
    box-shadow: 0 40px 96px var(--token-color-dark-purple-22);
    transform: translateY(-2px);
}

.fl-sticker-card .fl-heading-group {
    gap: unset;
    margin: 0;
    padding: 0;
}

.fl-sticker-card
    > :is(
        h1.fl-heading,
        h2.fl-heading,
        h3.fl-heading,
        h4.fl-heading,
        h5.fl-heading,
        h6.fl-heading,
        .fl-heading-group
    ) {
    margin-bottom: 0;
    order: 0;
}

.fl-card-sticker {
    margin: auto;
    order: 1;
}

.fl-sticker-card > div:has(.fl-card-sticker) {
    order: 2;
}

.fl-sticker-card > .fl-body {
    order: 3;
}

.fl-sticker-card > .fl-buttons {
    order: 4;
}

.fl-sticker-card > div:has(.fl-card-sticker),
.fl-sticker-card > div:has(.fl-card-icon),
.fl-sticker-card > div:has(.fl-tag) {
    align-items: center;
    display: flex;
    flex: 1 1 auto;
    gap: var(--token-spacing-sm);
    justify-content: center;
    width: 100%;
}

.fl-sticker-card
    :is(
        h1.fl-heading,
        h2.fl-heading,
        h3.fl-heading,
        h4.fl-heading,
        h5.fl-heading,
        h6.fl-heading
    ) {
    color: inherit;
    font-family: var(--fl-theme-font-family-headline);
    font-weight: var(--token-font-weight-semibold);
    letter-spacing: -0.01em;
    line-height: 1.05;
    margin: 0;
}

.fl-sticker-card .fl-superheading {
    color: var(--token-color-light-purple);
    display: block;
    font-family: var(--fl-theme-font-family-body);
    font-size: var(--fl-theme-font-size-body-2xs);
    font-weight: var(--token-font-weight-medium);
    letter-spacing: 0.02em;
    margin: 0 0 var(--token-spacing-xl);
    text-transform: uppercase;
}

.fl-sticker-card .fl-body > * {
    font-family: var(--fl-theme-font-family-body);
    font-size: var(--fl-theme-font-size-body-sm);
    font-weight: var(--token-font-weight-regular);
    line-height: 1.4;
    text-wrap: balance;
}

.fl-sticker-card .fl-body > *:first-child {
    margin-top: 0;
}

.fl-sticker-card .fl-body > *:last-child {
    margin-bottom: 0;
}

.fl-sticker-card .fl-buttons {
    align-items: center;
    display: flex;
    flex-wrap: wrap;
    gap: var(--token-spacing-lg);
    justify-content: center;
    margin-top: var(--token-spacing-lg);
}

.fl-sticker-card .fl-buttons:empty {
    display: none;
}

.fl-sticker-card .fl-button {
    margin: 0;
}

.fl-card-sticker img {
    height: var(--fl-card-sticker-size, 60px);
    margin: 0;
    object-fit: contain;
    width: var(--fl-card-sticker-size, 60px);
}

.fl-sticker-card > div:has(.fl-card-icon) {
    color: var(--token-color-light-purple);
}

.fl-sticker-card.fl-card-fill {
    background: var(--token-gradient-soft-purple);
}

/* =====================================================================
Step Cards List - With Kit variant
===================================================================== */

/*
 * Scoped styling hook applied to the Cards List wrapper:
 *   <div class="fl-card-grid fl-step-cards-with-kit">...</div>
 *
 */

.fl-card-grid.fl-step-cards-with-kit {
    gap: var(--token-layout-2xs);
    justify-content: center;
    margin: 0 auto;
    max-width: var(--token-width-desktop-wide-banner);
    width: 100%;
}

.fl-card-grid .fl-step-card {
    flex: 1 1 auto;
}

.fl-step-card {
    display: flex;
    flex-direction: column;
    gap: var(--token-spacing-xl);
    position: relative;
}

.fl-step-card .fl-card-media {
    align-items: center;
    background: var(--fl-step-card-bg);
    border-radius: var(--token-layout-xs);
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    gap: var(--token-spacing-2xl);
    justify-content: center;

    /* Figma: 240px on desktop, but keep responsive */
    min-height: calc(var(--token-layout-md) * 3);
    overflow: hidden;
    padding: var(--token-spacing-2xl);
    width: 100%;
}

.fl-step-card .fl-card-media img {
    height: auto;
    max-height: 96px;
    max-width: 100%;
    object-fit: contain;
    width: auto;
}

.fl-step-card-index {
    align-items: center;
    background: var(--fl-step-card-index-bg);
    border-radius: var(--token-layout-3xs);
    box-sizing: border-box;
    color: var(--fl-theme-color-text);
    display: flex;
    font-size: 12px;
    font-weight: var(--token-font-weight-medium);
    height: var(--token-layout-3xs);
    justify-content: center;
    margin: 0;
    padding: var(--token-spacing-sm);
    width: var(--token-layout-3xs);
}

.fl-step-card .fl-heading-group {
    margin: 0;
}

.fl-step-card .fl-heading {
    font-size: var(--token-spacing-lg);
    font-weight: var(--token-font-weight-semibold);
    letter-spacing: 0;
    line-height: 1.1;
    margin: 0;
    text-wrap: auto;
}

/* Decorative Kit (Figma): only on the last card */
.fl-step-cards-with-kit .fl-step-card:last-child {
    margin-top: var(--token-layout-sm);
}

.fl-step-cards-with-kit .fl-step-card:last-child::before,
.fl-step-cards-with-kit .fl-step-card:last-child::after {
    background-repeat: no-repeat;
    background-size: auto;
    content: '';
    pointer-events: none;
    position: absolute;
    top: -32px;
    z-index: 3;
}

.fl-step-cards-with-kit .fl-step-card:last-child::before {
    background-image: url('/media/img/firefox/flare/fox-tail.png');
    background-size: contain;
    height: 110px;
    left: -20px;
    width: 68px;
}

.fl-step-cards-with-kit .fl-step-card:last-child::after {
    background-image: url('/media/img/firefox/flare/fox-head.png');
    background-size: contain;
    height: 86px;
    right: 0;
    top: -60px;
    width: 98px;
}

@media (--viewport-sm-up) {
    .fl-card-grid .fl-step-card {
        flex-basis: calc((100% - var(--fl-card-grid-gap)) / 2);
        max-width: 50%;
    }
}

@media (--viewport-lg-up) {
    .fl-card-grid.fl-step-cards-with-kit {
        gap: var(--token-layout-lg) var(--token-layout-3xs);
    }

    .fl-step-cards-with-kit .fl-step-card:last-child {
        margin-top: 0;
    }

    .fl-card-grid .fl-step-card {
        flex-basis: 100%;
        min-height: unset;
    }
}

/* =====================================================================
Illustration Card
===================================================================== */

.fl-illustration-card {
    display: flex;
    flex-basis: 100%;
    flex-direction: column;
    padding: 0;
    position: relative;
}

.fl-illustration-card .fl-heading-group {
    gap: 0;
    margin: 0;
    padding-block-end: var(--token-spacing-sm);
}

.fl-illustration-card .fl-card-media,
.fl-illustration-card .fl-card-media img {
    border-radius: var(--token-spacing-xl);
    width: 100%;
}

.fl-illustration-card .fl-card-content {
    display: flex;
    flex-direction: column;
    flex-grow: 1;
}

.fl-illustration-card .fl-superheading {
    color: var(--fl-theme-color-brand-text);
    display: block;
    font-size: var(--fl-theme-label-xs);
    font-weight: var(--token-font-weight-medium);
    margin-block-end: var(--token-spacing-sm);
}

.fl-illustration-card .fl-heading {
    font-size: var(--fl-theme-font-size-heading-2xs);
    font-variation-settings: unset;
    line-height: 1.1;
}

@media (--viewport-sm-up) {
    .fl-card-grid .fl-illustration-card {
        flex-basis: calc((100% - var(--fl-card-grid-gap)) / 2);
    }
}

@media (--viewport-lg-up) {
    .fl-card-grid .fl-illustration-card {
        flex-basis: 100%;
        min-height: unset;
    }
}

.fl-illustration-card.fl-illustration-icon-card {
    flex-direction: row;
    gap: var(--token-spacing-lg);
}

.fl-illustration-card.fl-illustration-icon-card img {
    border-radius: 0;
    margin: 0;
}

.fl-illustration-card.fl-illustration-icon-card .fl-card-media {
    align-items: center;
    background-color: var(--fl-theme-illustration-icon-bg);
    border-radius: var(--token-spacing-md);
    display: flex;
    justify-content: center;
    margin-block-end: var(--token-spacing-lg);
    max-height: 56px;
    max-width: 56px;
    padding: var(--token-spacing-md);
}

@media (--viewport-md-up) {
    .fl-illustration-card.fl-illustration-icon-card {
        flex-direction: column;
    }

    .fl-illustration-card.fl-illustration-icon-card .fl-card-media {
        border-radius: var(--token-spacing-xl);
        max-height: 102px;
        max-width: 102px;
    }
}
