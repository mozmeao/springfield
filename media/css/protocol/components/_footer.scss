// This Source Code Form is subject to the terms of the Mozilla Public
// License, v. 2.0. If a copy of the MPL was not distributed with this
// file, You can obtain one at https://mozilla.org/MPL/2.0/.

$image-path: '/media/protocol/img';

@use '../../m24/vars/color' as m24;
@import '~@mozilla-protocol/core/protocol/css/includes/lib';

@mixin footer-line {
    border-bottom: 1px solid m24.$token-color-mid-gray;
}

/* ----------------------------------------------------------------------------- */
// Primary

.mzp-c-footer {
    background-color: m24.$token-color-off-black;
}

.c-footer-subheading {
    @extend .mzp-c-footer-heading; /* stylelint-disable-line scss/at-extend-no-missing-placeholder */
    color: m24.$token-color-mid-gray;

    @media screen and (max-width: #{$screen-sm - 1}) {
        padding-top: 0;
        padding-bottom: 0;
    }

    @media #{$mq-lg} {
        margin-top: $layout-sm / 2 * -1;
    }
}

// .is-closed[aria-hidden="true"] {
//     display: none;
// }

@media screen and (min-width: #{$screen-sm}) and (max-width: #{$screen-lg - 1px}) {
    .mzp-c-footer-sections {
        // massive Protocol override
        column-gap: $spacing-lg;
        display: grid;
        grid-template-areas:
                    "download download"
                    "community resources"
                    "follow resources";
        grid-template-columns: repeat(2, minmax(0, 1fr));
        padding-bottom: $layout-sm;

        &::after {
            display: none;
        }

        .mzp-c-footer-section {
            width: auto;
            padding: 0;

            &::after {
                display: none;
            }
        }

        .mzp-c-footer-list:last-child {
            margin-bottom: 0;
        }

        .c-footer-section-download {
            border-bottom: 1px solid m24.$token-color-mid-gray;
            column-gap: $spacing-lg;
            display: grid;
            grid-column-end: -1;
            grid-column-start: 1;
            grid-template-areas:
                "download download"
                "platforms latest"
                "platforms business";
            grid-template-columns: repeat(2, minmax(0, 1fr));
            margin-bottom: $layout-sm;

            .c-footer-heading-download {
                grid-area: download;
                grid-column-end: -1;
                grid-column-start: 1;
            }

            .c-footer-list-download {
                grid-area: platforms;

                li:last-child {
                    margin-bottom: 0;
                }
            }

            .c-footer-section-latest {
                grid-area: latest;
            }

            .c-footer-section-business {
                grid-area: business;
            }
        }

        .c-footer-section-community {
            grid-area: community;
        }

        .c-footer-section-resources {
            grid-area: resources;
        }

        .c-footer-section-follow {
            grid-area: follow;
            padding-top: $layout-sm;

            li:last-child {
                margin-bottom: 0;
            }
        }
    }
}


/* ----------------------------------------------------------------------------- */
// Secondary

.mzp-c-footer-terms {
    max-width: 100%;

    a {
        font-size: var(--body-md-size);

        &:link,
        &:visited {
            color: m24.$token-color-mid-gray;
            text-decoration: none;

            &:hover,
            &:focus {
                text-decoration: underline;
            }
        }
    }
}

/* ----------------------------------------------------------------------------- */
// More

.c-footer-more {
    @media screen and (max-width: #{$screen-md - 1px}) {
        border-top: 1px solid m24.$token-color-mid-gray;
        margin-top: $layout-sm;
        padding-top: $layout-sm;
    }

    @media screen and (min-width: #{$screen-md}) {
        margin-top: $layout-lg;

        @supports(display:flex) {
            display: flex;
            justify-content: space-between;
        }
    }
}

.c-footer-logo {
    @extend .mzp-c-footer-primary-logo; /* stylelint-disable-line scss/at-extend-no-missing-placeholder */

    a {
        background-image: url('/media/img/logos/firefox/logo-word-hor-white.svg');
        background-size: contain;
        height: 40px;
        width: 220px;
    }
}

/* ----------------------------------------------------------------------------- */
// Language switcher

.mzp-c-language-switcher {
    position: relative;

    &:has(.mzp-js-language-switcher-select:hover)::before,
    &:has(.mzp-js-language-switcher-select:focus)::before,
    &:has(.mzp-js-language-switcher-select:focus-within)::before {
        background: m24.$token-color-off-white url('/media/img/icons/m24-small/globe.svg') center center no-repeat;
        background-size: 18px 18px;
    }

    &::before {
        @include bidi(((left, 4px, auto), (right, auto, 4px)));
        background: transparent url('/media/img/icons/m24-small/globe-white.svg') center center no-repeat;
        background-size: 18px 18px;
        top: 50%;
        margin-top: -16px;
        content: "";
        display: block;
        height: 32px;
        width: 32px;
        position: absolute;
    }

    label {
        @include visually-hidden;
    }

    .mzp-c-language-switcher-link {
        color: m24.$token-color-off-white;
        position: absolute;
        top: -1.5em;

        .js & {
            @include visually-hidden;
        }

        &:focus,
        &:focus-visible {
            clip: auto;
            height: auto;
            overflow: visible;
            text-indent: 0;
            width: auto;
        }
    }

    .mzp-js-language-switcher-select {
        @include bidi(((background-position, right 8px center, 8px center),));
        background: m24.$token-color-off-black url('/media/img/icons/m24-small/down-caret-white.svg') no-repeat;
        background-size: 16px 16px;
        border-radius: 0;
        border: 2px solid m24.$token-color-off-white;
        color: m24.$token-color-off-white;
        font-weight: 600;
        font-size: remify(16px);
        padding-left: 36px;
        max-width: 100%;
        width: 100%;
        margin: 0;

        @media #{$mq-lg} {
            width: fit-content;
        }

        &:hover,
        &:focus,
        &:focus-visible,
        &:focus-within {
            color: $color-black;
            background: m24.$token-color-off-white url('/media/img/icons/m24-small/down-caret.svg') no-repeat;
            @include bidi(((background-position, right 8px center, 8px center),));
            background-size: 16px 16px;
        }
    }
}
